<html>

	<head>
		<title>mShrine</title>
	</head>

	<body
        style="
            background-color: black;
            margin: 0;
            height: 100%;
            width: 100%;
            justify-content: center;
            align-items: center;
        ">

        <script src="ThreeMin.js"></script>
        <script src="3js/loaders/GLTFLoader.js"></script>
        <script src="3js/controls/FirstPersonControls.js"></script>

        <script>

            const sleep = sec => new Promise(r => setTimeout(r, sec*1_000))

        </script>

		<script>

            const renderer = new THREE.WebGLRenderer()
            document.body.appendChild(renderer.domElement)
			renderer.setSize(window.innerWidth, window.innerHeight)

			const scene = new THREE.Scene()

			const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000)
            camera.rotateY(-1.7)
            camera.position.x = 15.6
            camera.position.z = 1.766
            camera.position.y = -.16
            camera.rotateY(-.126)

            // const controls = new THREE.OrbitControls(camera, renderer.domElement)
            // controls.minDistance = 0
            // controls.maxDistance = 99999999

            const controls = new THREE.FirstPersonControls(camera, renderer.domElement)
            controls.movementSpeed = 0
            controls.lookSpeed = .06

            const light = new THREE.AmbientLight()
            scene.add(light)

			// const geometry = new THREE.BoxGeometry( 1, 1, 1 )
			// const material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } )
			// const cube = new THREE.Mesh( geometry, material )
			// scene.add(cube)

            const loader = new THREE.GLTFLoader()

            loader.load('shrine.glb', function ( gltf ) {
                const model = gltf.scene
                scene.add(gltf.scene)
            })

            loader.load('stairs.glb', function ( gltf ) {
                const model = gltf.scene
                model.rotateY(-45)
                model.position.y = -6
                model.position.x = -18.6
                model.position.z = -2.8
                scene.add(gltf.scene)
            })

            // loader.load('spring.glb', function ( gltf ) {
            //     const model = gltf.scene
            //     model.scale.set(.01, .016, .01)
            //     model.rotateY(-44.5)
            //     //model.position.y = -6
            //     model.position.x = 1
            //     model.position.z = 5
            //     scene.add(gltf.scene)
            // })

            loader.load('spirit.glb', function ( gltf ) {
                const model = gltf.scene
                
                model.position.x = 18.6
                model.position.z = 2.62
                model.position.y = -1.2

                //model.rotation.x = Math.PI / 2
                //model.rotation.z = Math.PI / 2
                //model.rotateY(Math.PI/2)
                model.rotateX(Math.PI/2)
                model.rotateZ(Math.PI/2+Math.PI/16)
                scene.add(gltf.scene)
            })

            var clock = new THREE.Clock()

			function render_scene() {

                controls.update(clock.getDelta())

                renderer.clear()

				requestAnimationFrame(render_scene)
                
				renderer.render(scene, camera)

            } render_scene()

		</script>

	</body>

</html>
